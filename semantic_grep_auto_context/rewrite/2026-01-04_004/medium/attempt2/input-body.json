{"top_p":1,"chat_template_kwargs":{"reasoning_effort":"medium"},"temperature":1,"stream":true,"max_tokens":8192,"messages":[{"content":"You are an expert coder. Ground rules:\n- Follow the user's instructions. \n- DO NOT wrap answers in markdown code blocks, which means no triple backticks like ``` nor single backtick like ` .\n- Do not explain answers, just give me code. \n- Never add comments to the end of a line. \n- Never add comments.\n- Preserve indentation. \n- If rewriting code, preserve unrelated code. \n- Prefer readable code over of comments. ","role":"system"},{"content":"## General Code Preferences\n\n- When rewriting code, leave unrelated code and unrelated comments as is.\n- When an if statement has an AMBIGUOUS condition, extract a variable to meaningfully name it, for example:\n```lua\nlocal is_blank_line = line:match(\"^%s*$\")\nif is_blank_line then\n    -- ...\nend\n```\n","role":"user"},{"content":"## Python Code Preferences\n\nNaming\n- Use snake_case for functions and variables.\n- Use PascalCase for classes.\n\nType Hints\n- Use type hints to clear up ambiguity and improve code completion.\n- prefer list[] over List[] to mimimizes imports\n- Avoid docstrings, ABSOLUTELY NO trivial comments.\n","role":"user"},{"content":"# Semantic Grep matches: 5\n\n## /Users/wesdemos/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/player/segment_plotter.py:361-363\ndef shift_center_to(self, middle_seconds: float):\n        cur = self.get_x_limits()\n        self.set_x_limits(middle_seconds - cur.half, middle_seconds + cur.half)\n\n## /Users/wesdemos/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/player/segment_plotter.py:355-359\ndef zoom_and_center_to(self, new_width_seconds: float) -> None:\n        \"\"\"Zoom the plot to a fixed width centered on the current view.\"\"\"\n        cur = self.get_x_limits()\n        half = new_width_seconds / 2\n        self.set_x_limits(cur.middle - half, cur.middle + half)\n\n## /Users/wesdemos/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/player/segment_plotter.py:23-38\n@dataclass(frozen=True)\nclass XLimits:\n    start: float\n    end: float\n\n    @property\n    def width(self) -> float:\n        return self.end - self.start\n\n    @property\n    def middle(self) -> float:\n        return (self.start + self.end) / 2\n\n    @property\n    def half(self) -> float:\n        return self.width / 2\n\n## /Users/wesdemos/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/player/segment_plotter.py:340-346\ndef zoom_to_gap(self, window: GapWindow | None) -> None:\n        if window is None:\n            return\n        # fixed zoom level with gap centered (not full window, just the gap of silence)...\n        middle = (window.gap.start_seconds() + window.gap.end_seconds()) / 2\n        width_seconds = 2  # fixed width in seconds\n        self.set_x_limits(middle - width_seconds / 2, middle + width_seconds / 2)\n\n## /Users/wesdemos/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/player/segment_plotter.py:0-17\nimport math\nfrom matplotlib.axes import Axes\nfrom matplotlib.figure import Figure\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport rich\nimport sounddevice as sd\nimport time\nfrom dataclasses import dataclass\nfrom matplotlib.text import Annotation, Text\nfrom matplotlib.lines import Line2D\nfrom auto_edit.new_silence.player.clipper import clip_full_window\nfrom auto_edit.new_silence.player.crosshairs import ToggleableCursor\nfrom auto_edit.new_silence.player.plot_helpers import is_alt, is_ctrl, is_shift, setup_events\nfrom auto_edit.new_silence.detects.segments import AudioAnalysisResult, GapWindow, DetectedSegment, SegmentLabel\nfrom auto_edit.new_silence.player.prompter import applescript_prompt\nfrom auto_edit.new_silence.detects.breathing_state import clear_hop_items, hop_items\n\n\n","role":"user"},{"content":"extract a shared function that eliminates most of the duplicate code b/w these functions\nHere is code I selected (with carefully preserved indentation) from auto_edit/new_silence/player/plot_helpers.py:\n    def pan_left(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        shift = cur.width * 0.1\n        plotter.set_x_limits(cur.start - shift, cur.end - shift)\n\n    def pan_right(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        shift = cur.width * 0.1\n        plotter.set_x_limits(cur.start + shift, cur.end + shift)\n\n    def pan_page_left(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        plotter.set_x_limits(cur.start - cur.width, cur.end - cur.width)\n\n    def pan_page_right(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        plotter.set_x_limits(cur.start + cur.width, cur.end + cur.width)\n\n    def pan_half_page_left(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        plotter.set_x_limits(cur.start - cur.half, cur.end - cur.half)\n\n    def pan_half_page_right(event: KeyEvent):\n        cur = plotter.get_x_limits()\n        plotter.set_x_limits(cur.start + cur.half, cur.end + cur.half)\n","role":"user"}],"model":""}