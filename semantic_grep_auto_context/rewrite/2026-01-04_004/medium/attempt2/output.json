{"reasoning_content":"The user wants to extract a shared function that eliminates most of the duplicate code between these functions. The code is in plot_helpers.py, showing pan_left, pan_right, pan_page_left/right, pan_half_page_left/right. Each gets cur = plotter.get_x_limits(); then computes shift (cur.width*0.1) for left/right, or uses cur.width, or cur.half. Then calls plotter.set_x_limits with start +/- shift, end +/- shift.\n\nWe need to extract a shared function, perhaps something like def pan(event: KeyEvent, factor: float): shift = cur.width * factor (or shift = cur.width, cur.half). Or more generally, a function that takes a delta multiplier: e.g., delta = cur.width * factor, where factor can be 0.1, 1, 0.5 (since half page is half width). Then compute new_start = cur.start + delta, new_end = cur.end + delta. For left pan, factor is negative; for right pan, factor positive.\n\nThus define a helper: def _pan(delta: float): cur = plotter.get_x_limits(); plotter.set_x_limits(cur.start + delta, cur.end + delta). Then specific functions call with appropriate delta: for pan_left: delta = -cur.width*0.1; pan_right: delta = cur.width*0.1; pan_page_left: delta = -cur.width; etc.\n\nBut we need to preserve code and indentation, and avoid comments. We'll modify plot_helpers.py to add a shared function, maybe called _apply_pan(delta: float). Then rewrite the functions to use it.\n\nUser wants code only, no explanations, no comments. No markdown. Ensure indentation preserved.\n\nWe need to include type hints? The preferences: Use snake_case for functions, type hints where possible. The existing functions have no type hints; we could add them: event: KeyEvent. Also need import of KeyEvent? Probably already imported somewhere else. We'll just add type hint.\n\nAdd function def _apply_pan(delta: float) -> None: cur = plotter.get_x_limits(); plotter.set_x_limits(cur.start + delta, cur.end + delta).\n\nThen define each pan function using it: def pan_left(event: KeyEvent): cur = plotter.get_x_limits(); delta = -cur.width * 0.1; _apply_pan(delta). But we could also compute delta inside helper: maybe pass a multiplier factor: def _pan_by_factor(factor: float) -> None: cur = plotter.get_x_limits(); delta = cur.width * factor; plotter.set_x_limits(cur.start + delta, cur.end + delta). Then pan_left: _pan_by_factor(-0.1); pan_right: _pan_by_factor(0.1); pan_page_left: _pan_by_factor(-1); pan_page_right: _pan_by_factor(1); pan_half_page_left: _pan_by_factor(-0.5); pan_half_page_right: _pan_by_factor(0.5). That eliminates duplicate code fully.\n\nImplement that.\n\nAdd import typing? No.\n\nProceed to output code modifications only. We'll include the new helper before the functions, keep functions as before but simplified.","role":"assistant","content":"def _pan_by_factor(factor: float) -> None:\n    cur = plotter.get_x_limits()\n    delta = cur.width * factor\n    plotter.set_x_limits(cur.start + delta, cur.end + delta)\n\n\ndef pan_left(event: KeyEvent):\n    _pan_by_factor(-0.1)\n\n\ndef pan_right(event: KeyEvent):\n    _pan_by_factor(0.1)\n\n\ndef pan_page_left(event: KeyEvent):\n    _pan_by_factor(-1.0)\n\n\ndef pan_page_right(event: KeyEvent):\n    _pan_by_factor(1.0)\n\n\ndef pan_half_page_left(event: KeyEvent):\n    _pan_by_factor(-0.5)\n\n\ndef pan_half_page_right(event: KeyEvent):\n    _pan_by_factor(0.5)","finish_reason":"stop"}