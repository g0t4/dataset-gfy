pass analysis to a ctor and compute some extra fields and replace downstream usages, saves me 5 minutes easily!
