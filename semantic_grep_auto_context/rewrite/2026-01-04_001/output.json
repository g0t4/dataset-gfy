{"finish_reason":"stop","content":"```python\nfrom dataclasses import dataclass\n\n@dataclass(frozen=True)\nclass XLimits:\n    start: float\n    end: float\n    width: float\n\nclass SegmentPlotter:\n    # existing methods ...\n\n    def get_x_limits(self) -> XLimits:\n        start, end = self.ax.get_xlim()\n        return XLimits(start=start, end=end, width=end - start)\n\n    def set_x_limits(self, start_seconds: float, end_seconds: float) -> None:\n        if start_seconds >= end_seconds:\n            rich.print(f\"Invalid x limits: start_seconds ({start_seconds}) >= end_seconds ({end_seconds})\")\n            return\n        self.ax.set_xlim(start_seconds, end_seconds)\n        self.toggle_zoom_level_elements()\n\n    def zoom_and_center_to(self, width_seconds: float) -> None:\n        cur = self.get_x_limits()\n        middle = (cur.start + cur.end) / 2\n        half = width_seconds / 2\n        self.set_x_limits(middle - half, middle + half)\n\n    def shift_center_to(self, middle_seconds: float):\n        cur = self.get_x_limits()\n        half = cur.width / 2\n        self.set_x_limits(middle_seconds - half, middle_seconds + half)\n\n    def zoom_to_gap(self, window: GapWindow | None) -> None:\n        if window is None:\n            return\n        middle = (window.gap.start_seconds() + window.gap.end_seconds()) / 2\n        width_seconds = 2\n        half = width_seconds / 2\n        self.set_x_limits(middle - half, middle + half)\n\n    def zoom_to_window(self, window: GapWindow) -> None:\n        self.set_x_limits(window.start_seconds(), window.end_seconds())\n```\n\n```python\n# plot_helpers.py\ndef pan_page_left(event: KeyEvent):\n    cur = plotter.get_x_limits()\n    start, end = clamp_xlim(cur.start - cur.width, cur.end - cur.width)\n    plotter.set_x_limits(start, end)\n\ndef pan_page_right(event: KeyEvent):\n    cur = plotter.get_x_limits()\n    start, end = clamp_xlim(cur.start + cur.width, cur.end + cur.width)\n    plotter.set_x_limits(start, end)\n\ndef pan_half_page_left(event: KeyEvent):\n    cur = plotter.get_x_limits()\n    half_width = cur.width / 2\n    start, end = clamp_xlim(cur.start - half_width, cur.end - half_width)\n    plotter.set_x_limits(start, end)\n\ndef pan_half_page_right(event: KeyEvent):\n    cur = plotter.get_x_limits()\n    half_width = cur.width / 2\n    start, end = clamp_xlim(cur.start + half_width, cur.end + half_width)\n    plotter.set_x_limits(start, end)\n```","reasoning_content":"We need to add helper returning DTO. Define a dataclass XLimits(start: float, end: float, width: float). Add method get_x_limits(self) -> XLimits in SegmentPlotter. Then modify functions to use it. Also reuse in zoom_and_center_to, shift_center_to, zoom_to_gap, zoom_to_window, set_x_limits maybe. We'll just compute using helper. Provide code modifications.","role":"assistant"}