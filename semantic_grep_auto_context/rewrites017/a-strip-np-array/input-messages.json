{
  "temperature": 1,
  "max_tokens": 4096,
  "top_p": 1,
  "stream": true,
  "chat_template_kwargs": {
    "reasoning_effort": "low"
  },
  "model": "",
  "messages": [
    {
      "content": "You are an expert coder. Ground rules:\n- Follow the user's instructions. \n- DO NOT wrap answers in markdown code blocks, which means no triple backticks like ``` nor single backtick like ` .\n- Do not explain answers, just give me code. \n- Never add comments to the end of a line. \n- Never add comments.\n- Preserve indentation. \n- If rewriting code, preserve unrelated code. \n- Prefer readable code over of comments. ",
      "role": "system"
    },
    {
      "content": "## General Code Preferences\n\n- When rewriting code, leave unrelated code and unrelated comments as is.\n- When an if statement has an AMBIGUOUS condition, extract a variable to meaningfully name it, for example:\n```lua\nlocal is_blank_line = line:match(\"^%s*$\")\nif is_blank_line then\n    -- ...\nend\n```\n",
      "role": "user"
    },
    {
      "content": "## Python Code Preferences\n\nNaming\n- Use snake_case for functions and variables.\n- Use PascalCase for classes.\n\nType Hints\n- Use type hints to clear up ambiguity and improve code completion.\n- prefer list[] over List[] to mimimizes imports\n- Avoid docstrings, ABSOLUTELY NO trivial comments.\n",
      "role": "user"
    },
    {
      "content": "# Semantic Grep matches: 5\n\n## ~/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/detects/crossings.py:2-20\ndef zero_crossing_indices(signal):\n    sign_sequence = np.sign(signal)  # -1, 0, +1\n\n    crossing_indices = []\n    previous_nonzero_sign = 0\n\n    for index, current_sign in enumerate(sign_sequence):\n        if current_sign == 0:\n            continue\n\n        if previous_nonzero_sign == 0:\n            previous_nonzero_sign = current_sign\n            continue\n\n        if current_sign != previous_nonzero_sign:\n            crossing_indices.append(index)      # crossing confirmed here\n            previous_nonzero_sign = current_sign     # update immediately\n\n    return np.asarray(crossing_indices)\n\n## ~/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/detects/crossings.py:20-29\n\n\n# %% \n\nzero_crossing_indices([-1,  1, -1,  0, 1])     # → [1, 2, 4]\nzero_crossing_indices([-1,  1, -1,  1])        # → [1, 2, 3]\nzero_crossing_indices([-1,  0,  0,  1])        # → [3]\nzero_crossing_indices([ 1,  1,  1, -1])        # → [3]\nzero_crossing_indices([-1, -1, -1])            # → []\n\n\n\n## ~/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/detect_tests.py:0-16\nimport numpy as np\nfrom dataclasses import dataclass, field\nfrom typing import List\nimport pytest\n\n# Assuming these classes are defined in the module under test\nfrom auto_edit.new_silence.detect import (\n    DetectThresholds,\n    SegmentLabel,\n    DetectedSegment,\n    CombinedSegments,\n    AudioAnalysisResult,\n    merge_close_speech_segments,\n)\n\nid_counter = 0\n\n\n\n## ~/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/ranges_tests.py:0-9\nfrom types import SimpleNamespace\nimport numpy as np\nimport pytest\nfrom auto_edit.new_silence.detects.segments import AudioAnalysisResult, DetectThresholds, DetectedSegment, GapWindow, LoadedAudio, NonSpeechGap, SegmentLabel\nfrom auto_edit.new_silence.ranges import get_ranges\nfrom auto_edit.ranges import ContentRange, SilenceRange\n\nid_counter = 0\nTEST_VIDEO_FPS = 30\n\n\n\n## ~/repos/github/g0t4/private-auto-edit-suggests/auto_edit/new_silence/detects/learn.py:0-3\nimport numpy as np\nimport librosa\nimport pytest\n\n\n",
      "role": "user"
    },
    {
      "content": "drop the call to np.array() on y and expected... \nHere is code I selected (with carefully preserved indentation) from auto_edit/new_silence/detects/crossings_tests.py:\ndef test_zero_crossing_no_crossing():\n    y = np.array([1, 2, 3])\n    expected = np.array([], dtype=int)\n    indices = zero_crossing_indices(y)\n    np.testing.assert_array_equal(indices, expected)\n\ndef test_zero_crossing_multiple_noise():\n    y = np.array([0.01, -0.01, 0.02, -0.02, 0.03, -0.03, 0.04])\n    expected = np.array([1, 2, 3, 4, 5, 6])\n    indices = zero_crossing_indices(y)\n    np.testing.assert_array_equal(indices, expected)\n\ndef test_zero_crossing_at_eps():\n    y = np.array([0.0, 0.0, 1.0, -1.0])\n    expected = np.array([3])\n    indices = zero_crossing_indices(y)\n    np.testing.assert_array_equal(indices, expected)",
      "role": "user"
    }
  ]
}
