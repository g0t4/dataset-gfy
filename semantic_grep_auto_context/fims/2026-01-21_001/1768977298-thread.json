{
  "response_message":{
    "role":"assistant",
    "finish_reason":"stop",
    "content":"20-30",
    "reasoning_content":"We need to fill middle to make name contain silent20-30 etc. So complete string: f\"silent20-30\". The code line: assert f\"silent<|fim_middle|>\" in name. So we need `20-30`."
  },
  "request_body":{
    "options":[],
    "model":"gpt-oss:120b",
    "messages":[{
        "role":"developer",
        "content":"You are completing code from a Neovim plugin.\nAs the user types, the plugin suggests code completions based on their cursor position: <|fim_middle|>\n\nThe surrounding code is limited, it may not be the full file. Focus on the code near <|fim_middle|>\nDo NOT explain your decisions. Do NOT return markdown blocks ```\nONLY return valid code at the <|fim_middle|> position\nPAY attention to existing whitespace. Especially on the cursor line!\nYOU ARE ONLY INSERTING CODE. DO NOT REPEAT PREFIX. DO NOT REPEAT SUFFIX.\nComplete as little or as much code as is necessary to help the user. That means part of a line, a full line or even multiple lines! Goal is to help the user as much as is possible and reasonable.\n\nHere are a few examples of tricky completions:\n\n## Example: suggest middle of line (cursor has existing code before and after it)\n\n```python\ndef area(width, height):\n    return <|fim_middle|> * height\n```\n\nSay this is your desired result:\n```python\ndef area(width, height):\n    return width * height\n```\n\n1. thent he CORRECT completion is (do not include backticks, those are just to delimit included whitespace):\n`width`\n\n2. WRONG (because repeats the suffix):\n`width * height`\nresults in:\n`    return width * height * height`\n\n3. WRONG (because repeats both suffix and prefix):\n`    return width * height`\nresults in:\n`    return     return width * height * height`\n\n\n## Example: cursor is indented\n\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    <|fim_middle|>\n    end\nend\n```\n\n*Keep in mind, the indent will be there before the suggested code too.*\n\nSay this is your desired result:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    else\n        print(\"Non‑positive\")\n    end\nend\n```\n\n1. then the CORRECT completion is:\n```lua\nelse\n        print(\"Non‑positive\")\n```\n\n2. WRONG (`else` ends up double indented when it should be single):\n```lua\n    else\n        print(\"Non‑positive\")\n```\nresults in:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n        else\n        print(\"Non‑positive\")\n    end\nend\n```\n\n3. WRONG (`print` ends up single indented when it should be double):\n```lua\nelse\n    print(\"Non‑positive\")\n```\nresults in:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    else\n    print(\"Non‑positive\")\n    end\nend\n```\n\n\n"
      },{
        "role":"user",
        "content":"Here is context that's automatically provided, that MAY be relevant.\nrepo: auto-edit-suggests\n\n## General project code rules:\n- Never add comments to the end of a line.\n- NEVER add TODO comments for me.\n\n## General Code Preferences\n\n- When rewriting code, leave unrelated code and unrelated comments as is.\n- When an if statement has an AMBIGUOUS condition, extract a variable to meaningfully name it, for example:\n```lua\nlocal is_blank_line = line:match(\"^%s*$\")\nif is_blank_line then\n    -- ...\nend\n```\n\n\n## Python Code Preferences\n- Use snake_case for functions and variables.\n- Use PascalCase for classes.\n- Use type hints to clear up ambiguity and improve code completion.\n- prefer `list[]` over `List[]` to mimimize imports\n- Avoid docstrings, ABSOLUTELY NO trivial comments.\n\n"
      },{
        "role":"user",
        "content":"# Semantic Grep matches: 5\n\nThis is automatic context based on my request. These may or may not be relevant.\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/tests/raw-tests.py:2-10\nclass TestRawSilencePeriodGeneral:\n\n    def test_duration(self):\n        silence = RawSilencePeriod(100, 200)\n        assert silence.duration() == 100\n\n    def test_str_representation(self):\n        silence = RawSilencePeriod(5.5, 12.75)\n        assert str(silence) == \"Raw[5.5➜12.75)\"\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/tests/raw-tests.py:8-10\ndef test_str_representation(self):\n        silence = RawSilencePeriod(5.5, 12.75)\n        assert str(silence) == \"Raw[5.5➜12.75)\"\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/new_silence/tests/integration_tests.py:312-331\ndef test_detect_split_breathing_into_two_silences(self):\n        # TODO! add test for breathing at minute3 19s ...\n        #   TODO IS THIS DOUBLE HUMP? IF SO MOVE IT UP WITH REST\n        #\n        #  FYI develop it in a notebook first, codify it here for long term use\n        #\n        # !!! REMOVE OLD NOTES ABOUT BEING OFF b/c of 2048... that was OFF b/c of NON ZERO START TIMING ON VIDEOS!!!\n        #\n        # silent565-577 / 18.833s-19.233s    # frame_len=1024,hop_len=25\n        #  TODO list a few more from FCPXML file\n        #\n        pass\n        # assert len(analysis.merged_segments) == 5\n        # rich.print(analysis.merged_segments)\n        #\n        # assert len(analysis.windows) == 1\n        #\n        # win = analysis.windows[0]\n        #\n        # # assert gap == pytest.approx(0.000021)\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/ranges.py:72-88\nclass SilenceRange(FrameRange):\n\n    dampen: bool = True  # reduce audio level of entire clip, defaults to True for legacy silence detect approach\n\n    def __str__(self):\n        result = f\"Silence[{self.start_frame}➜{self.end_frame})\"\n        if self.dampen:\n            result += f\" dampen\"\n        return result\n\n    def __copy__(self):\n        return self.__deepcopy__()\n\n    def __deepcopy__(self, memo=None):\n        new = SilenceRange(self.start_frame, self.end_frame)\n        new.dampen = self.dampen\n        return new\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/fcpxml/builder.py:100-131\ndef add_silence(self, silence: SilenceRange, is_first_silence: bool):\n        name = \"\"\n\n        max_silence_frames = round(0.5 * self.fps)\n        if is_first_silence:\n            # limit to last 0.5s @ 1x only when trimming is needed\n            if silence.duration_frames() > max_silence_frames:\n                name += \"trim-\"\n                new_start_frame = round(silence.end_frame - max_silence_frames)\n                silence = SilenceRange(new_start_frame, silence.end_frame)\n\n        if silence.duration_frames() > max_silence_frames:\n            name += \"trim-\"\n            new_end_frame = round(silence.start_frame + max_silence_frames)  # KEEP\n            silence = SilenceRange(silence.start_frame, new_end_frame)  # KEEP\n\n        name += f\"silent{silence.start_frame}-{silence.end_frame} / {self.show_seconds(silence.start_frame)}-{self.show_seconds(silence.end_frame)}\"\n\n        clip = ET.SubElement(\n            self.spine,\n            \"asset-clip\",  # https://developer.apple.com/documentation/professional-video-applications/asset-clip\n            name=name,\n            ref=\"r2\",\n            start=self.frames_to_fraction(silence.start_frame),\n            duration=self.frames_to_fraction(silence.duration_frames()),\n            audioRole=\"dialogue\",\n        )\n\n        if silence.dampen:\n            # adjust_volume(clip, -30) # loud breathing will kinda be heard (barely)\n            # adjust_volume(clip, -96) # or just mute it\n            add_noise_gate(clip)\n"
      },{
        "role":"user",
        "content":"Please suggest text to replace <|fim_middle|>:\n\n```auto_edit/fcpxml/builder_tests.py\nimport xml.etree.ElementTree as ET\n\nimport pytest\n\nfrom auto_edit.fcpxml.builder import FcpXml\nfrom auto_edit.ranges import ContentRange, SilenceRange\n\n@pytest.fixture\ndef fcp_xml():\n    # Minimal dummy video clip with required attributes\n    class DummyVideo:\n        fps = 30\n        filename = \"dummy.mp4\"\n\n        # The path is not used for frames_to_fraction calculations\n        def __init__(self):\n            self.filename = \"dummy.mp4\"\n\n    dummy = DummyVideo()\n    return FcpXml(\n        original=dummy,\n        fcpbundle_path=\"/tmp\",\n        project_name=\"test\",\n        output_dir=\"/tmp\",\n        fcpxml_file=\"/tmp/out.fcpxml\",\n    )\n\nclass TestFramesToFraction:\n\n    def test_frames_to_fraction_integer_frame(self, fcp_xml):\n        assert fcp_xml.frames_to_fraction(5) == \"5/30s\"\n\n    def test_frames_to_fraction_float_ending_zero_is_stripped(self, fcp_xml):\n        # 5.0 should be rendered without the decimal part\n        assert fcp_xml.frames_to_fraction(5.0) == \"5/30s\"\n\n    def test_frames_to_fraction_float_non_integer_preserved(self, fcp_xml):\n        # Non‑integer values keep their fractional representation\n        assert fcp_xml.frames_to_fraction(5.5) == \"5.5/30s\"\n\nclass TestAddSilence:\n\n    def test_long_second_silence__keeps_first_15_frames(self, fcp_xml):\n        long_silence = SilenceRange(start_frame=10, end_frame=100)\n\n        # preceding content range so the silence is treated as a non‑first silence\n        dummy_content = ContentRange(start_frame=0, end_frame=10)\n        fcp_xml.process_ranges([dummy_content, long_silence])\n\n        clips = list(fcp_xml.spine)\n        assert len(clips) == 2\n        clip = clips[1]\n\n        assert clip.get(\"name\").startswith(\"trim-\")\n        assert clip.get(\"duration\") == \"15/30s\"\n        assert clip.get(\"start\") == \"10/30s\"\n\n    def test_long_first_silence__keeps_last_15_frames(self, fcp_xml):\n        # Silence longer than max and flagged as first silence should include \"trim-\" prefix once\n        silence = SilenceRange(start_frame=0, end_frame=100)\n\n        fcp_xml.process_ranges([silence])\n\n        clip = list(fcp_xml.spine)[0]\n        # 100-15 (30fps/2) = 85\n        assert clip.get(\"name\", \"\").startswith(f\"trim-silent85-\")\n        assert clip.get(\"start\") == f\"85/30s\"\n        assert clip.get(\"duration\") == \"15/30s\"\n\n    def test_short_first_silence__does_not_trim(self, fcp_xml):\n        short_first = SilenceRange(start_frame=5, end_frame=10)  # 5 frames duration\n\n        fcp_xml.process_ranges([short_first])\n\n        clip = list(fcp_xml.spine)[0]\n        name = clip.get(\"name\")\n        assert \"trim-\" not in name\n        assert clip.get(\"duration\") == \"5/30s\"\n        assert name.startswith(\"silent5-10\")\n        assert clip.get(\"start\") == \"5/30s\"\n\n    def test_short_second_silence__does_not_trim(self, fcp_xml):\n        short_silence = SilenceRange(start_frame=20, end_frame=30)\n\n        # preceding content range so the silence is treated as a non‑first silence\n        dummy_content = ContentRange(start_frame=0, end_frame=20)\n        fcp_xml.process_ranges([dummy_content, short_silence])\n\n        clip = list(fcp_xml.spine)[1]\n        name = clip.get(\"name\")\n        assert \"trim-\" not in name\n        assert clip.get(\"duration\") == \"10/30s\"\n        assert f\"silent<|fim_middle|>\" in name\n        assert clip.get(\"start\") == \"20/30s\"\n```\n\n## Reminders about the cursor line:\nText before cursor: `        assert f\"silent`\nText after cursor: `\" in name`"
      }],
    "chat_template_kwargs":{
      "reasoning_effort":"low"
    },
    "top_p":1,
    "max_tokens":4096,
    "raw":false,
    "stream":true,
    "temperature":1
  },
  "last_sse":{
    "created":1768977298,
    "model":"ggml-org/gpt-oss-120b-GGUF",
    "system_fingerprint":"b7785-1c7cf94b2",
    "timings":{
      "cache_n":901,
      "prompt_per_second":3627.2112037531,
      "prompt_n":1885,
      "predicted_per_second":201.3857859395,
      "prompt_ms":519.683,
      "prompt_per_token_ms":0.27569389920424,
      "predicted_ms":317.798,
      "predicted_per_token_ms":4.96559375,
      "predicted_n":64
    },
    "object":"chat.completion.chunk",
    "id":"chatcmpl-yFnNFO0V9jD8LClOi1NegRHpEbxWLQ0P",
    "choices":[{
        "index":0,
        "finish_reason":"stop",
        "delta":[]
      }]
  }
}