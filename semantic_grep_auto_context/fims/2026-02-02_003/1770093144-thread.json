{
  "last_sse":{
    "created":1770093144,
    "timings":{
      "predicted_per_second":247.15877744676,
      "predicted_n":56,
      "prompt_per_second":9057.8083694947,
      "prompt_n":1816,
      "prompt_ms":200.49,
      "prompt_per_token_ms":0.11040198237885,
      "predicted_ms":226.575,
      "predicted_per_token_ms":4.0459821428571,
      "cache_n":1161
    },
    "choices":[{
        "delta":[],
        "index":0,
        "finish_reason":"stop"
      }],
    "system_fingerprint":"b7785-1c7cf94b2",
    "model":"ggml-org/gpt-oss-120b-GGUF",
    "id":"chatcmpl-7WebrNEZf8gn8trLnd9KQBBw6tiGysen",
    "object":"chat.completion.chunk"
  },
  "request_body":{
    "messages":[{
        "content":"You are completing code from a Neovim plugin.\nAs the user types, the plugin suggests code completions based on their cursor position: <|fim_middle|>\n\nThe surrounding code is limited, it may not be the full file. Focus on the code near <|fim_middle|>\nDo NOT explain your decisions. Do NOT return markdown blocks ```\nONLY return valid code at the <|fim_middle|> position\nPAY attention to existing whitespace. Especially on the cursor line!\nYOU ARE ONLY INSERTING CODE. DO NOT REPEAT PREFIX. DO NOT REPEAT SUFFIX.\nComplete as little or as much code as is necessary to help the user. That means part of a line, a full line or even multiple lines! Goal is to help the user as much as is possible and reasonable.\n\nHere are a few examples of tricky completions:\n\n## Example: suggest middle of line (cursor has existing code before and after it)\n\n```python\ndef area(width, height):\n    return <|fim_middle|> * height\n```\n\nSay this is your desired result:\n```python\ndef area(width, height):\n    return width * height\n```\n\n1. then the CORRECT completion is (do not include backticks, those are just to delimit included whitespace):\n`width`\n\n2. WRONG (because repeats the suffix):\n`width * height`\nresults in:\n`    return width * height * height`\n\n3. WRONG (because repeats both suffix and prefix):\n`    return width * height`\nresults in:\n`    return     return width * height * height`\n\n\n## Example: cursor is indented\n\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    <|fim_middle|>\n    end\nend\n```\n\n*Keep in mind, the indent will be there before the suggested code too.*\n\nSay this is your desired result:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    else\n        print(\"Non‑positive\")\n    end\nend\n```\n\n1. then the CORRECT completion is:\n```lua\nelse\n        print(\"Non‑positive\")\n```\n\n2. WRONG (`else` ends up double indented when it should be single):\n```lua\n    else\n        print(\"Non‑positive\")\n```\nresults in:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n        else\n        print(\"Non‑positive\")\n    end\nend\n```\n\n3. WRONG (`print` ends up single indented when it should be double):\n```lua\nelse\n    print(\"Non‑positive\")\n```\nresults in:\n```lua\nfunction print_sign(number)\n    if number > 0 then\n        print(\"Positive\")\n    else\n    print(\"Non‑positive\")\n    end\nend\n```\n\n\n",
        "role":"developer"
      },{
        "content":"Here is context that's automatically provided, that MAY be relevant.\nrepo: auto-edit-suggests\n\n## General project code rules:\n- Never add comments to the end of a line.\n- NEVER add TODO comments for me.\n\n## General Code Preferences\n\n- When rewriting code, leave unrelated code and unrelated comments as is.\n- When an if statement has an AMBIGUOUS condition, extract a variable to meaningfully name it, for example:\n```lua\nlocal is_blank_line = line:match(\"^%s*$\")\nif is_blank_line then\n    -- ...\nend\n```\n\n\n## Python Code Preferences\n- Use snake_case for functions and variables.\n- Use PascalCase for classes.\n- Use type hints to clear up ambiguity and improve code completion.\n- prefer `list[]` over `List[]` to mimimize imports\n- Avoid docstrings, ABSOLUTELY NO trivial comments.\n\n",
        "role":"user"
      },{
        "content":"# Semantic Grep matches: 5\n\nThis is automatic context based on my request. These may or may not be relevant.\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/new_silence/detector_notebook.py:50-67\n# %%\n\nshow_for(gptoss_fim_video.minute7)\nplotter.zoom_to_gap_at_seconds(2.5)  # double hop\n\n# %% \n\nshow_for(gptoss_fim_video.minute8)\nplotter.zoom_to_gap_at_seconds(40.9)\n# %%\n\nanalysis_first10mins()  # prefer console for reviewing across entire clip (or at least 10 mins)\n# can always load a specific segment below to see more about it\n\n# %%\n\nmove_to_secondary_screen(plotter.fig)\n# move_to_primary_screen(plotter.fig)\n\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/new_silence/prober.py:37-46\n\n\n# from auto_edit.tests.test_files import gptoss_fim_video, gptoss_fim_examples\n#\n# print('2:')\n# raise_if_video_has_nonzero_timing_start_offsets(gptoss_fim_video.minute2)\n#\n# print()\n# print(\"1:\")\n# raise_if_video_has_nonzero_timing_start_offsets(gptoss_fim_video.non_zero_start)\n\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/tests/notebooks/ffmpeg_split_out_detected_silences_for_subsequent_testing.py:0-19\nimport subprocess\nimport pytest\nimport os\nimport rich\nfrom pathlib import Path\nfrom types import SimpleNamespace\nfrom auto_edit.silences.align import AlignedSilencePeriod, align_silences_to_frame_boundaries_asymmetric_pad_WIP\nfrom auto_edit.silences.detect_raw import ffmpeg_detect_silence_raw\nfrom auto_edit.tests.test_files import gptoss_fim_video, gptoss_fim_examples\n\n# FYI this was used to split out detected silences for analysis and/or integration testing\n#  this is not mission critical to keep, discard if needed\n\nraw = ffmpeg_detect_silence_raw(gptoss_fim_video.full)\nrich.print(raw)\n\n# %%\n\n# FYI! this is VERY SLOW to split out files\n# FYI! also be careful not to overwrite silences you already split out (move them elsewhere at least)\n\n\n## ~/repos/github/g0t4/auto-edit-suggests/generate_fcpxml_notebook.py:40-59\n\n\nIS_NOTEBOOK = False\nif not running_in_notebook():\n    if len(sys.argv) != 2:\n        print(f\"ERROR, you must pass a video file CLI arg\")\n        exit(1)\n    print(\"CLI\")\n    which_video = sys.argv[1]\nelse:\n    print(\"IN NOTEBOOK\")\n    IS_NOTEBOOK = True\n    # default to the short 3‑minute example when running inside a notebook\n    which_video = str(gptoss_fim_video.first_3mins)\n    # which_video = str(gptoss_fim_video.first_10mins)  # previous default\n    # which_video = str(gptoss_fim_video.minute9)       # other example\n\n# %% * file paths and params\n\nif which_video.endswith('.mkv'):\n\n\n## ~/repos/github/g0t4/auto-edit-suggests/auto_edit/tests/aligned-tests.py:0-13\nimport subprocess\nimport pytest\nimport os\nimport rich\nfrom pathlib import Path\nfrom types import SimpleNamespace\nfrom auto_edit.silences.align import AlignedSilencePeriod, align_silences_to_frame_boundaries_asymmetric_pad_WIP\nfrom auto_edit.silences.detect_raw import ffmpeg_detect_silence_raw\nfrom auto_edit.tests.test_files import gptoss_fim_video, gptoss_fim_examples\n\n#   TODO! add unit test of combination behavior\n\n# TODO! setup unit tests of AlignedSilencePeriod too\n\n\n",
        "role":"user"
      },{
        "content":"Please suggest text to replace <|fim_middle|>:\n\n```auto_edit/tests/test_files.py\nimport os\nfrom dataclasses import dataclass\nfrom pathlib import Path\nfrom types import SimpleNamespace\nfrom auto_edit.new_silence.tests.analysis_loader import get_full_analysis\n\ndropbox_sync_dir = Path(os.getenv('HOME') or '') / 'dbox/'\ntest_videos_dir = dropbox_sync_dir / 'auto-edit-videos' / 'pytest_samples'\n\ngptoss_fim_examples = test_videos_dir / '01-gpt-oss-fim'\n\nclass gptoss_fim_video:\n    full = gptoss_fim_examples / \"full.mp4\"\n\n    #  TODO fix issues w/ PTS on minute1 and throw if start in ffprobe output != 0 anywhere\n    #      minute1=gptoss_fim_examples / \"minutes\" / \"minute1\" / \"minute1.mp4\",\n    # TODO then add check to shell out to ffprobe and look for start = NON zero value and fail if so\n    #  TODO! worse case just trim first 0.080 off of combined.shifted.mp4 and minute1.mp4 videos\n    #   that s/b fine on most recordings\n    #   ffprobe -select_streams a:0 -show_packets -read_intervals %+1  foo.mp4/mkv\n    #   ffprobe -select_streams a:0 -of csv -show_packets -read_intervals %+1  foo.mp4/mkv\n    #\n    #  !!! FOR now you can test with minute2+ b/c they're already re-encoded and there are no non-zero starts\n    #  !!! that means for auto-edit purposes what you generate will line up with what FCPX shows\n    first_10mins = gptoss_fim_examples / \"minutes/first_10mins/first_10mins.mp4\"\n    first_3mins = gptoss_fim_examples / \"minutes/first_3mins/first_3mins.mp4\"\n\n    minute2 = gptoss_fim_examples / \"minutes\" / \"minute2\" / \"minute2.mp4\"\n    minute3 = gptoss_fim_examples / \"minutes\" / \"minute3\" / \"minute3.mp4\"\n    minute4 = gptoss_fim_examples / \"minutes\" / \"minute4\" / \"minute4.mp4\"\n    minute5 = gptoss_fim_examples / \"minutes\" / \"minute5\" / \"minute5.mp4\"\n    minute6 = gptoss_fim_examples / \"minutes\" / \"minute6\" / \"minute6.mp4\"\n    minute7 = gptoss_fim_examples / \"minutes\" / \"minute7\" / \"minute7.mp4\"\n    minute8 = gptoss_fim_examples / \"minutes\" / \"minute8\" / \"minute8.mp4\"\n    minute9 = gptoss_fim_examples / \"minutes\" / \"minute9\" / \"minute9.mp4\"\n    minute10 = gptoss_fim_examples / \"minutes\" / \"minute10\" / \"minute10.mp4\"\n    minute11 = gptoss_fim_examples / \"minutes\" / \"minute11\" / \"minute11.mp4\"\n    minute12 = gptoss_fim_examples / \"minutes\" / \"minute12\" / \"minute12.mp4\"\n    minute13 = gptoss_fim_examples / \"minutes\" / \"minute13\" / \"minute13.mp4\"\n\n    cfr_first_10 = gptoss_fim_examples / \"<|fim_middle|>\n        # 'auto-edit-videos/pytest_samples/01-gpt-oss-fim/minutes-normalized/first_10mins/first_10mins.mp4'\n\n    @staticmethod\n    def minute(num):\n        return gptoss_fim_examples / \"minutes\" / f\"minute{num}\" / f\"minute{num}.mp4\"\n\n    split_breathing = gptoss_fim_examples / \"breathing-split-silence.mp4\"\n    split_breathing_wav = gptoss_fim_examples / \"breathing-split-silence.wav\"\n\n    # FYI for testing non-zero start to a video\n    non_zero_start = gptoss_fim_examples / \"minutes/non_zero_start/non_zero_start_from_minute1_44.mp4\"\n\n# FYI when you add more example videos, top level videos like this 01-gpt-oss-fim dir...\n#   create a new top level SimpleNamespace object to point at the nested files too\n\ndef analysis_first10mins():\n    return get_full_analysis(gptoss_fim_video.first_10mins)\n\ndef analysis_first3mins():\n    return get_full_analysis(gptoss_fim_video.first_3mins)\n\ndef analysis2():\n    return get_full_analysis(gptoss_fim_video.minute2)\n\ndef analysis3():\n    return get_full_analysis(gptoss_fim_video.minute3)\n\ndef analysis4():\n    return get_full_analysis(gptoss_fim_video.minute4)\n\ndef analysis5():\n    return get_full_analysis(gptoss_fim_video.minute5)\n\ndef analysis6():\n    return get_full_analysis(gptoss_fim_video.minute6)\n\ndef analysis7():\n    return get_full_analysis(gptoss_fim_video.minute7)\n\ndef analysis8():\n    return get_full_analysis(gptoss_fim_video.minute8)\n\ndef analysis9():\n    return get_full_analysis(gptoss_fim_video.minute9)\n\ndef analysis10():\n    return get_full_analysis(gptoss_fim_video.minute10)\n\ndef analysis11():\n    return get_full_analysis(gptoss_fim_video.minute11)\n\ndef analysis12():\n    return get_full_analysis(gptoss_fim_video.minute12)\n\ndef analysis13():\n    return get_full_analysis(gptoss_fim_video.minute13)\n```\n\n## Reminders about the cursor line:\nText before cursor: `    cfr_first_10 = gptoss_fim_examples / \"`",
        "role":"user"
      }],
    "options":[],
    "stream":true,
    "model":"gpt-oss:120b",
    "max_tokens":4096,
    "top_p":1,
    "chat_template_kwargs":{
      "reasoning_effort":"low"
    },
    "raw":false,
    "temperature":1
  },
  "response_message":{
    "reasoning_content":"We need to fill path string. Likely \"minutes-normalized/first_10mins/first_10mins.mp4\". So insert that.",
    "role":"assistant",
    "content":"minutes-normalized/first_10mins/first_10mins.mp4\"",
    "finish_reason":"stop"
  }
}